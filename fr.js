/*!
 * 
 * @forgerock/javascript-sdk
 *
 * index.js
 *
 * Copyright (c) 2021 ForgeRock. All rights reserved.
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file for details.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("forgerock",[],t):"object"==typeof exports?exports.forgerock=t():e.forgerock=t()}(self,(function(){return(()=>{"use strict";var e={1853:(e,t)=>{var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=t.CallbackType=void 0,function(e){e.BadRequest="BAD_REQUEST",e.Timeout="TIMEOUT",e.Unauthorized="UNAUTHORIZED",e.Unknown="UNKNOWN"}(n||(n={})),t.ErrorCode=n,function(e){e.BooleanAttributeInputCallback="BooleanAttributeInputCallback",e.ChoiceCallback="ChoiceCallback",e.ConfirmationCallback="ConfirmationCallback",e.DeviceProfileCallback="DeviceProfileCallback",e.HiddenValueCallback="HiddenValueCallback",e.KbaCreateCallback="KbaCreateCallback",e.MetadataCallback="MetadataCallback",e.NameCallback="NameCallback",e.NumberAttributeInputCallback="NumberAttributeInputCallback",e.PasswordCallback="PasswordCallback",e.PollingWaitCallback="PollingWaitCallback",e.ReCaptchaCallback="ReCaptchaCallback",e.RedirectCallback="RedirectCallback",e.SelectIdPCallback="SelectIdPCallback",e.StringAttributeInputCallback="StringAttributeInputCallback",e.SuspendedTextOutputCallback="SuspendedTextOutputCallback",e.TermsAndConditionsCallback="TermsAndConditionsCallback",e.TextOutputCallback="TextOutputCallback",e.ValidatedCreatePasswordCallback="ValidatedCreatePasswordCallback",e.ValidatedCreateUsernameCallback="ValidatedCreateUsernameCallback"}(r||(r={})),t.CallbackType=r},1527:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(2275)),s=n(4985),c=n(5628),l=n(7111),f=n(9618),p=i(n(6008)),d=function(){function e(){}return e.next=function(e,t){return o(this,void 0,void 0,(function(){var n,r,o,i,c,f,d,h,y;return a(this,(function(a){switch(a.label){case 0:return n=u.default.get(t),r=n.realmPath,o=n.serverConfig,i=n.tree,c=n.type,f=t?t.query:{},d=this.constructUrl(o,r,i,f),h=p.default({url:new URL(d),init:this.configureRequest(e)},e?s.ActionTypes.Authenticate:s.ActionTypes.StartAuthenticate,{tree:i,type:c||"service"}),[4,l.withTimeout(fetch(h.url.toString(),h.init),o.timeout)];case 1:return y=a.sent(),[4,this.getResponseJson(y)];case 2:return[2,a.sent()]}}))}))},e.constructUrl=function(e,t,n,o){var a=n?{authIndexType:"service",authIndexValue:n}:void 0,i=r(r({},o),a),u=Object.keys(i).length>0?"?"+f.stringify(i):"",s=f.getEndpointPath("authenticate",t,e.paths);return f.resolve(e.baseUrl,""+s+u)},e.configureRequest=function(e){return{body:e?JSON.stringify(e):void 0,credentials:"include",headers:{accept:"application/json","accept-api-version":"protocol=1.0,resource=2.1","content-type":"application/json","x-requested-with":c.REQUESTED_WITH},method:"POST"}},e.getResponseJson=function(e){return o(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return t=e.headers.get("content-type"),t&&t.indexOf("application/json")>-1?[4,e.json()]:[3,2];case 1:return r=o.sent(),[3,3];case 2:r={},o.label=3;case 3:return(n=r).status=e.status,n.ok=e.ok,[2,n]}}))}))},e}();t.default=d},5241:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TIMEOUT=void 0;t.DEFAULT_TIMEOUT=6e4},4985:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,function(e){e.Authenticate="AUTHENTICATE",e.Authorize="AUTHORIZE",e.Logout="LOGOUT",e.ExchangeToken="EXCHANGE_TOKEN",e.RefreshToken="REFRESH_TOKEN",e.RevokeToken="REVOKE_TOKEN",e.StartAuthenticate="START_AUTHENTICATE",e.UserInfo="USER_INFO"}(t.ActionTypes||(t.ActionTypes={}))},2275:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TIMEOUT=void 0;var o=n(5241);Object.defineProperty(t,"DEFAULT_TIMEOUT",{enumerable:!0,get:function(){return o.DEFAULT_TIMEOUT}});var a=function(){function e(){}return e.set=function(e){if(!this.isValid(e))throw new Error("Configuration is invalid");e.serverConfig&&this.validateServerConfig(e.serverConfig),this.options=r({},e)},e.get=function(e){if(!this.options&&!e)throw new Error("Configuration has not been set");var t=r(r({},this.options),e);if(!t.serverConfig||!t.serverConfig.baseUrl)throw new Error("Server configuration has not been set");return t},e.isValid=function(e){return!(!e||!e.serverConfig)},e.validateServerConfig=function(e){e.timeout||(e.timeout=o.DEFAULT_TIMEOUT);var t=e.baseUrl;t&&"/"!==t.charAt(t.length-1)&&(e.baseUrl=t+"/")},e}();t.default=a},5053:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.clear=t.add=void 0,t.add=function(e,t,n){e[t]=e[t]||[],e[t].indexOf(n)<0&&e[t].push(n)},t.remove=function(e,t,n){if(e[t]){var r=e[t].indexOf(n);r>=0&&e[t].splice(r,1)}},t.clear=function(e,t){Object.keys(e).forEach((function(n){t&&n!==t||delete e[n]}))}},4140:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(5053),o=function(){function e(){this.callbacks={}}return e.prototype.addEventListener=function(e,t){r.add(this.callbacks,e,t)},e.prototype.removeEventListener=function(e,t){r.remove(this.callbacks,e,t)},e.prototype.clearEventListeners=function(e){r.clear(this.callbacks,e)},e.prototype.dispatchEvent=function(e){if(this.callbacks[e.type])for(var t=0,n=this.callbacks[e.type];t<n.length;t++){(0,n[t])(e)}},e}();t.default=o},1538:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getName=function(){return this.getOutputByName("name","")},t.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},t.prototype.isRequired=function(){return this.getOutputByName("required",!1)},t.prototype.getFailedPolicies=function(){return this.getOutputByName("failedPolicies",[])},t.prototype.getPolicies=function(){return this.getOutputByName("policies",{})},t.prototype.setValidateOnly=function(e){this.setInputValue(e,/validateOnly/)},t.prototype.setValue=function(e){this.setInputValue(e)},t}(a(n(2483)).default);t.default=i},2400:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},t.prototype.getDefaultChoice=function(){return this.getOutputByName("defaultChoice",0)},t.prototype.getChoices=function(){return this.getOutputByName("choices",[])},t.prototype.setChoiceIndex=function(e){var t=this.getChoices().length;if(e<0||e>t-1)throw new Error(e+" is out of bounds");this.setInputValue(e)},t.prototype.setChoiceValue=function(e){var t=this.getChoices().indexOf(e);if(-1===t)throw new Error('"'+e+'" is not a valid choice');this.setInputValue(t)},t}(a(n(2483)).default);t.default=i},6812:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getDefaultOption=function(){return Number(this.getOutputByName("defaultOption",0))},t.prototype.getMessageType=function(){return Number(this.getOutputByName("messageType",0))},t.prototype.getOptions=function(){return this.getOutputByName("options",[])},t.prototype.getOptionType=function(){return Number(this.getOutputByName("optionType",0))},t.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},t.prototype.setOptionIndex=function(e){if(0!==e&&1!==e)throw new Error('"'+e+'" is not a valid choice');this.setInputValue(e)},t.prototype.setOptionValue=function(e){var t=this.getOptions().indexOf(e);if(-1===t)throw new Error('"'+e+'" is not a valid choice');this.setInputValue(t)},t}(a(n(2483)).default);t.default=i},5168:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getMessage=function(){return this.getOutputByName("message","")},t.prototype.isMetadataRequired=function(){return this.getOutputByName("metadata",!1)},t.prototype.isLocationRequired=function(){return this.getOutputByName("location",!1)},t.prototype.setProfile=function(e){this.setInputValue(JSON.stringify(e))},t}(a(n(2483)).default);t.default=i},7296:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2483)),a=n(1853),i=r(n(1538)),u=r(n(2400)),s=r(n(6812)),c=r(n(5168)),l=r(n(4148)),f=r(n(5796)),p=r(n(6301)),d=r(n(8128)),h=r(n(9205)),y=r(n(4576)),v=r(n(1996)),b=r(n(3186)),g=r(n(7458)),m=r(n(1801)),_=r(n(8365)),w=r(n(7921)),O=r(n(5828)),C=r(n(4975));t.default=function(e){switch(e.type){case a.CallbackType.BooleanAttributeInputCallback:return new i.default(e);case a.CallbackType.ChoiceCallback:return new u.default(e);case a.CallbackType.ConfirmationCallback:return new s.default(e);case a.CallbackType.DeviceProfileCallback:return new c.default(e);case a.CallbackType.HiddenValueCallback:return new l.default(e);case a.CallbackType.KbaCreateCallback:return new f.default(e);case a.CallbackType.MetadataCallback:return new p.default(e);case a.CallbackType.NameCallback:return new d.default(e);case a.CallbackType.NumberAttributeInputCallback:return new i.default(e);case a.CallbackType.PasswordCallback:return new h.default(e);case a.CallbackType.PollingWaitCallback:return new y.default(e);case a.CallbackType.ReCaptchaCallback:return new v.default(e);case a.CallbackType.RedirectCallback:return new b.default(e);case a.CallbackType.SelectIdPCallback:return new g.default(e);case a.CallbackType.StringAttributeInputCallback:return new i.default(e);case a.CallbackType.SuspendedTextOutputCallback:return new m.default(e);case a.CallbackType.TermsAndConditionsCallback:return new _.default(e);case a.CallbackType.TextOutputCallback:return new w.default(e);case a.CallbackType.ValidatedCreatePasswordCallback:return new O.default(e);case a.CallbackType.ValidatedCreateUsernameCallback:return new C.default(e);default:return new o.default(e)}}},4148:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t}(a(n(2483)).default);t.default=i},2483:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.payload=e}return e.prototype.getType=function(){return this.payload.type},e.prototype.getInputValue=function(e){return void 0===e&&(e=0),this.getArrayElement(this.payload.input,e).value},e.prototype.setInputValue=function(e,t){void 0===t&&(t=0),this.getArrayElement(this.payload.input,t).value=e},e.prototype.getOutputValue=function(e){return void 0===e&&(e=0),this.getArrayElement(this.payload.output,e).value},e.prototype.getOutputByName=function(e,t){var n=this.payload.output.find((function(t){return t.name===e}));return n?n.value:t},e.prototype.getArrayElement=function(e,t){if(void 0===t&&(t=0),void 0===e)throw new Error("No NameValue array was provided to search (selector "+t+")");if("number"==typeof t){if(t<0||t>e.length-1)throw new Error("Selector index "+t+" is out of range");return e[t]}if("string"==typeof t){if(!(n=e.find((function(e){return e.name===t}))))throw new Error('Missing callback input entry "'+t+'"');return n}if("object"==typeof t&&t.test&&t.exec){var n;if(!(n=e.find((function(e){return t.test(e.name)}))))throw new Error('Missing callback input entry "'+t+'"');return n}throw new Error("Invalid selector value type")},e}();t.default=n},5796:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},t.prototype.getPredefinedQuestions=function(){return this.getOutputByName("predefinedQuestions",[])},t.prototype.setQuestion=function(e){this.setValue("question",e)},t.prototype.setAnswer=function(e){this.setValue("answer",e)},t.prototype.setValue=function(e,t){if(!this.payload.input)throw new Error("KBA payload is missing input");var n=this.payload.input.find((function(t){return t.name.endsWith(e)}));if(!n)throw new Error('No input has name ending in "'+e+'"');n.value=t},t}(a(n(2483)).default);t.default=i},6301:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getData=function(){return this.getOutputByName("data",{})},t}(a(n(2483)).default);t.default=i},8128:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},t.prototype.setName=function(e){this.setInputValue(e)},t}(a(n(2483)).default);t.default=i},9205:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getFailedPolicies=function(){return this.getOutputByName("failedPolicies",[])},t.prototype.getPolicies=function(){return this.getOutputByName("policies",[])},t.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},t.prototype.setPassword=function(e){this.setInputValue(e)},t}(a(n(2483)).default);t.default=i},4576:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getMessage=function(){return this.getOutputByName("message","")},t.prototype.getWaitTime=function(){return Number(this.getOutputByName("waitTime",0))},t}(a(n(2483)).default);t.default=i},1996:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getSiteKey=function(){return this.getOutputByName("recaptchaSiteKey","")},t.prototype.setResult=function(e){this.setInputValue(e)},t}(a(n(2483)).default);t.default=i},3186:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getRedirectUrl=function(){return this.getOutputByName("redirectUrl","")},t}(a(n(2483)).default);t.default=i},7458:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getProviders=function(){return this.getOutputByName("providers",[])},t.prototype.setProvider=function(e){var t=this.getProviders().find((function(t){return t.provider===e}));if(!t)throw new Error('"'+e+'" is not a valid choice');this.setInputValue(t.provider)},t}(a(n(2483)).default);t.default=i},1801:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t}(a(n(7921)).default);t.default=i},8365:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getTerms=function(){return this.getOutputByName("terms","")},t.prototype.getVersion=function(){return this.getOutputByName("version","")},t.prototype.getCreateDate=function(){var e=this.getOutputByName("createDate","");return new Date(e)},t.prototype.setAccepted=function(e){void 0===e&&(e=!0),this.setInputValue(e)},t}(a(n(2483)).default);t.default=i},7921:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getMessage=function(){return this.getOutputByName("message","")},t.prototype.getMessageType=function(){return this.getOutputByName("messageType","")},t}(a(n(2483)).default);t.default=i},5828:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getFailedPolicies=function(){return this.getOutputByName("failedPolicies",[])},t.prototype.getPolicies=function(){return this.getOutputByName("policies",{})},t.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},t.prototype.isRequired=function(){return this.getOutputByName("required",!1)},t.prototype.setPassword=function(e){this.setInputValue(e)},t.prototype.setValidateOnly=function(e){this.setInputValue(e,/validateOnly/)},t}(a(n(2483)).default);t.default=i},4975:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.payload=t,n}return o(t,e),t.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},t.prototype.getFailedPolicies=function(){return this.getOutputByName("failedPolicies",[])},t.prototype.getPolicies=function(){return this.getOutputByName("policies",{})},t.prototype.isRequired=function(){return this.getOutputByName("required",!1)},t.prototype.setName=function(e){this.setInputValue(e)},t.prototype.setValidateOnly=function(e){this.setInputValue(e,/validateOnly/)},t}(a(n(2483)).default);t.default=i},8332:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StepType=void 0,function(e){e.LoginFailure="LoginFailure",e.LoginSuccess="LoginSuccess",e.Step="Step"}(n||(n={})),t.StepType=n},7807:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2046)),a=n(8332),i=function(){function e(e){this.payload=e,this.type=a.StepType.LoginFailure}return e.prototype.getCode=function(){return Number(this.payload.code)},e.prototype.getDetail=function(){return this.payload.detail},e.prototype.getMessage=function(){return this.payload.message},e.prototype.getProcessedMessage=function(e){return o.default.parseErrors(this.payload,e)},e.prototype.getReason=function(){return this.payload.reason},e}();t.default=i},9203:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(8332),o=function(){function e(e){this.payload=e,this.type=r.StepType.LoginSuccess}return e.prototype.getRealm=function(){return this.payload.realm},e.prototype.getSessionToken=function(){return this.payload.tokenId},e.prototype.getSuccessUrl=function(){return this.payload.successUrl},e}();t.default=o},687:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(7296)),a=n(8332),i=function(){function e(e,t){this.payload=e,this.type=a.StepType.Step,this.callbacks=[],e.callbacks&&(this.callbacks=this.convertCallbacks(e.callbacks,t))}return e.prototype.getCallbackOfType=function(e){var t=this.getCallbacksOfType(e);if(1!==t.length)throw new Error('Expected 1 callback of type "'+e+'", but found '+t.length);return t[0]},e.prototype.getCallbacksOfType=function(e){return this.callbacks.filter((function(t){return t.getType()===e}))},e.prototype.setCallbackValue=function(e,t){var n=this.getCallbacksOfType(e);if(1!==n.length)throw new Error('Expected 1 callback of type "'+e+'", but found '+n.length);n[0].setInputValue(t)},e.prototype.getDescription=function(){return this.payload.description},e.prototype.getHeader=function(){return this.payload.header},e.prototype.getStage=function(){return this.payload.stage},e.prototype.convertCallbacks=function(e,t){return e.map((function(e){return(t||o.default)(e)||o.default(e)}))},e}();t.default=i},3512:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(n(1527)),s=n(1853),c=i(n(7807)),l=i(n(9203)),f=i(n(687)),p=function(){function e(){}return e.next=function(e,t){return o(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return[4,u.default.next(e?e.payload:void 0,t)];case 1:return(n=o.sent()).authId?(r=t?t.callbackFactory:void 0,[2,new f.default(n,r)]):!n.authId&&n.ok?[2,new l.default(n)]:[2,new c.default(n)]}}))}))},e.redirect=function(e){var t=e.getCallbackOfType(s.CallbackType.RedirectCallback).getRedirectUrl();window.localStorage.setItem(this.previousStepKey,JSON.stringify(e)),window.location.assign(t)},e.resume=function(e,t){return o(this,void 0,void 0,(function(){var n,o,i,u,s,c,l,f,p,d;return a(this,(function(a){switch(a.label){case 0:if(n=new URL(e),o=n.searchParams.get("code"),i=n.searchParams.get("form_post_entry"),u=n.searchParams.get("nonce"),s=n.searchParams.get("scope"),c=n.searchParams.get("state"),l=n.searchParams.get("suspendedId"),o&&c||i){if(!(p=window.localStorage.getItem(this.previousStepKey)))throw new Error("Error: could not retrieve original redirect information.");try{f=JSON.parse(p)}catch(e){throw new Error("Error: could not parse redirect params or step information")}window.localStorage.removeItem(this.previousStepKey)}return d=r(r({},t),{query:r(r(r(r(r(r(r({},t&&t.query),o&&{code:o}),i&&{form_post_entry:i}),u&&{nonce:u}),s&&{scope:s}),c&&{state:c}),l&&{suspendedId:l})}),[4,this.next(f,d)];case 1:return[2,a.sent()]}}))}))},e.start=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,e.next(void 0,t)];case 1:return[2,n.sent()]}}))}))},e.previousStepKey="FRAuth_PreviousStep",e}();t.default=p},7316:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.reduceToObject=function(e,t){return e.reduce((function(e,n){if(n.includes(".")){var r=n.split("."),o=r[0],a=r[1],i=t[o]&&t[o][a];e[a]=null!=i?i:""}else e[n]=null!=t[n]?t[n]:null;return e}),{})},e.prototype.reduceToString=function(e,t){return e.reduce((function(e,n){return e=""+e+t[n].filename+";"}),"")},e}();t.default=n},989:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.platformProps=t.hardwareProps=t.fontNames=t.displayProps=t.devicePlatforms=t.delay=t.configurableCategories=t.browserProps=void 0;t.browserProps=["userAgent","appName","appCodeName","appVersion","appMinorVersion","buildID","product","productSub","vendor","vendorSub","browserLanguage"];t.configurableCategories=["fontNames","displayProps","browserProps","hardwareProps","platformProps"];t.delay=3e4;t.devicePlatforms={mac:["Macintosh","MacIntel","MacPPC","Mac68K"],windows:["Win32","Win64","Windows","WinCE"],ios:["iPhone","iPad","iPod"]};t.displayProps=["width","height","pixelDepth","orientation.angle"];t.fontNames=["cursive","monospace","serif","sans-serif","fantasy","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Bookman Old Style","Bradley Hand ITC","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Georgia","Gentium","Impact","King","Lucida Console","Lalit","Modena","Monotype Corsiva","Papyrus","Tahoma","TeX","Times","Times New Roman","Trebuchet MS","Verdana","Verona"];t.hardwareProps=["cpuClass","deviceMemory","hardwareConcurrency","maxTouchPoints","oscpu"];t.platformProps=["language","platform","userLanguage","systemLanguage"]},50:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(989),l=function(e){function t(t){var n=e.call(this)||this;return n.config={fontNames:c.fontNames,devicePlatforms:c.devicePlatforms,displayProps:c.displayProps,browserProps:c.browserProps,hardwareProps:c.hardwareProps,platformProps:c.platformProps},t&&Object.keys(t).forEach((function(e){if(!c.configurableCategories.includes(e))throw new Error("Device profile configuration category does not exist.");n.config[e]=t[e]})),n}return o(t,e),t.prototype.getBrowserMeta=function(){return navigator?this.reduceToObject(this.config.browserProps,navigator):(console.warn("Cannot collect browser metadata. navigator is not defined."),{})},t.prototype.getBrowserPluginsNames=function(){return navigator&&navigator.plugins?this.reduceToString(Object.keys(navigator.plugins),navigator.plugins):(console.warn("Cannot collect browser plugin information. navigator.plugins is not defined."),"")},t.prototype.getDeviceName=function(){if(!navigator)return console.warn("Cannot collect device name. navigator is not defined."),"";var e=navigator.userAgent,t=navigator.platform;switch(!0){case this.config.devicePlatforms.mac.includes(t):return"Mac (Browser)";case this.config.devicePlatforms.ios.includes(t):return t+" (Browser)";case this.config.devicePlatforms.windows.includes(t):return"Windows (Browser)";case/Android/.test(t)||/Android/.test(e):return"Android (Browser)";case/CrOS/.test(e)||/Chromebook/.test(e):return"Chrome OS (Browser)";case/Linux/.test(t):return"Linux (Browser)";default:return(t||"Unknown")+" (Browser)"}},t.prototype.getDisplayMeta=function(){return screen||console.warn("Cannot collect screen information. screen is not defined."),this.reduceToObject(this.config.displayProps,screen)},t.prototype.getHardwareMeta=function(){return navigator?this.reduceToObject(this.config.hardwareProps,navigator):(console.warn("Cannot collect OS metadata. Navigator is not defined."),{})},t.prototype.getIdentifier=function(){if(!window.crypto||!window.crypto.getRandomValues)return console.warn("Cannot generate profile ID. Crypto and/or getRandomValues is not supported."),"";if(!localStorage)return console.warn("Cannot store profile ID. localStorage is not supported."),"";var e=localStorage.getItem("profile-id");return e||(e=window.crypto.getRandomValues(new Uint32Array(3)).join("-"),localStorage.setItem("profile-id",e)),e},t.prototype.getInstalledFonts=function(){var e=document.createElement("canvas");if(!e)return console.warn("Cannot collect font data. Browser does not support canvas element"),"";var t=e.getContext&&e.getContext("2d");if(!t)return console.warn("Cannot collect font data. Browser does not support 2d canvas context"),"";var n="abcdefghi0123456789";t.font="72px Comic Sans";var r=t.measureText(n).width;return this.config.fontNames.reduce((function(e,o){return t.font="72px "+o+", Comic Sans",t.measureText(n).width!==r&&(e=""+e+o+";"),e}),"")},t.prototype.getLocationCoordinates=function(){return i(this,void 0,void 0,(function(){var e=this;return u(this,(function(t){return navigator&&navigator.geolocation?[2,new Promise((function(t){return i(e,void 0,void 0,(function(){return u(this,(function(e){return navigator.geolocation.getCurrentPosition((function(e){return t({latitude:e.coords.latitude,longitude:e.coords.longitude})}),(function(e){console.warn("Cannot collect geolocation information. "+e.code+": "+e.message),t({})}),{enableHighAccuracy:!0,timeout:c.delay,maximumAge:0}),[2]}))}))}))]:(console.warn("Cannot collect geolocation information. navigator.geolocation is not defined."),[2,Promise.resolve({})])}))}))},t.prototype.getOSMeta=function(){return navigator?this.reduceToObject(this.config.platformProps,navigator):(console.warn("Cannot collect OS metadata. navigator is not defined."),{})},t.prototype.getProfile=function(e){var t=e.location,n=e.metadata;return i(this,void 0,void 0,(function(){var e,r;return u(this,(function(o){switch(o.label){case 0:return e={identifier:this.getIdentifier()},n&&(e.metadata={hardware:a(a({},this.getHardwareMeta()),{display:this.getDisplayMeta()}),browser:a(a({},this.getBrowserMeta()),{plugins:this.getBrowserPluginsNames()}),platform:a(a({},this.getOSMeta()),{deviceName:this.getDeviceName(),fonts:this.getInstalledFonts(),timezone:this.getTimezoneOffset()})}),t?(r=e,[4,this.getLocationCoordinates()]):[3,2];case 1:r.location=o.sent(),o.label=2;case 2:return[2,e]}}))}))},t.prototype.getTimezoneOffset=function(){try{return(new Date).getTimezoneOffset()}catch(e){return console.warn("Cannot collect timezone information. getTimezoneOffset is not defined."),null}},t}(s(n(7316)).default);t.default=l},1789:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyKey=void 0,function(e){e.CannotContainCharacters="CANNOT_CONTAIN_CHARACTERS",e.CannotContainDuplicates="CANNOT_CONTAIN_DUPLICATES",e.CannotContainOthers="CANNOT_CONTAIN_OTHERS",e.LeastCapitalLetters="AT_LEAST_X_CAPITAL_LETTERS",e.LeastNumbers="AT_LEAST_X_NUMBERS",e.MatchRegexp="MATCH_REGEXP",e.MaximumLength="MAX_LENGTH",e.MaximumNumber="MAXIMUM_NUMBER_VALUE",e.MinimumLength="MIN_LENGTH",e.MinimumNumber="MINIMUM_NUMBER_VALUE",e.Required="REQUIRED",e.Unique="UNIQUE",e.UnknownPolicy="UNKNOWN_POLICY",e.ValidArrayItems="VALID_ARRAY_ITEMS",e.ValidDate="VALID_DATE",e.ValidEmailAddress="VALID_EMAIL_ADDRESS_FORMAT",e.ValidNameFormat="VALID_NAME_FORMAT",e.ValidNumber="VALID_NUMBER",e.ValidPhoneFormat="VALID_PHONE_FORMAT",e.ValidQueryFilter="VALID_QUERY_FILTER",e.ValidType="VALID_TYPE"}(n||(n={})),t.PolicyKey=n},2562:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getProp=void 0,t.getProp=function(e,t,n){return e&&void 0!==e[t]?e[t]:n}},2046:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyKey=void 0;var a=n(1789);Object.defineProperty(t,"PolicyKey",{enumerable:!0,get:function(){return a.PolicyKey}});var i=o(n(9824)),u=function(){function e(){}return e.parseErrors=function(e,t){var n=this,r=[];return e.detail&&e.detail.failedPolicyRequirements&&e.detail.failedPolicyRequirements.map((function(e){r.push.apply(r,[{detail:e,messages:n.parseFailedPolicyRequirement(e,t)}])})),r},e.parseFailedPolicyRequirement=function(e,t){var n=this,r=[];return e.policyRequirements.map((function(o){r.push(n.parsePolicyRequirement(e.property,o,t))})),r},e.parsePolicyRequirement=function(e,t,n){void 0===n&&(n={});var o="string"==typeof t?JSON.parse(t):r({},t),u=o.policyRequirement;return(n[u]||i.default[u]||i.default[a.PolicyKey.UnknownPolicy])(e,o.params?r(r({},o.params),{policyRequirement:u}):{policyRequirement:u})},e}();t.default=u},9824:(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(9038),a=n(1789),i=n(2562),u=((r={})[a.PolicyKey.CannotContainCharacters]=function(e,t){return e+' must not contain following characters: "'+i.getProp(t,"forbiddenChars","")+'"'},r[a.PolicyKey.CannotContainDuplicates]=function(e,t){return e+'  must not contain duplicates: "'+i.getProp(t,"duplicateValue","")+'"'},r[a.PolicyKey.CannotContainOthers]=function(e,t){return e+' must not contain: "'+i.getProp(t,"disallowedFields","")+'"'},r[a.PolicyKey.LeastCapitalLetters]=function(e,t){var n=i.getProp(t,"numCaps",0);return e+" must contain at least "+n+" capital "+o.plural(n,"letter")},r[a.PolicyKey.LeastNumbers]=function(e,t){var n=i.getProp(t,"numNums",0);return e+" must contain at least "+n+" numeric "+o.plural(n,"value")},r[a.PolicyKey.MatchRegexp]=function(e){return e+' has failed the "MATCH_REGEXP" policy'},r[a.PolicyKey.MaximumLength]=function(e,t){var n=i.getProp(t,"maxLength",0);return e+" must be at most "+n+" "+o.plural(n,"character")},r[a.PolicyKey.MaximumNumber]=function(e){return e+' has failed the "MAXIMUM_NUMBER_VALUE" policy'},r[a.PolicyKey.MinimumLength]=function(e,t){var n=i.getProp(t,"minLength",0);return e+" must be at least "+n+" "+o.plural(n,"character")},r[a.PolicyKey.MinimumNumber]=function(e){return e+' has failed the "MINIMUM_NUMBER_VALUE" policy'},r[a.PolicyKey.Required]=function(e){return e+" is required"},r[a.PolicyKey.Unique]=function(e){return e+" must be unique"},r[a.PolicyKey.UnknownPolicy]=function(e,t){return e+': Unknown policy requirement "'+i.getProp(t,"policyRequirement","Unknown")+'"'},r[a.PolicyKey.ValidArrayItems]=function(e){return e+' has failed the "VALID_ARRAY_ITEMS" policy'},r[a.PolicyKey.ValidDate]=function(e){return e+" has an invalid date"},r[a.PolicyKey.ValidEmailAddress]=function(e){return e+" has an invalid email address"},r[a.PolicyKey.ValidNameFormat]=function(e){return e+" has an invalid name format"},r[a.PolicyKey.ValidNumber]=function(e){return e+" has an invalid number"},r[a.PolicyKey.ValidPhoneFormat]=function(e){return e+" has an invalid phone number"},r[a.PolicyKey.ValidQueryFilter]=function(e){return e+' has failed the "VALID_QUERY_FILTER" policy'},r[a.PolicyKey.ValidType]=function(e){return e+' has failed the "VALID_TYPE" policy'},r);t.default=u},24:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(1853),o=n(1244),a=function(){function e(){}return e.getCodes=function(e){var t,n=null===(t=this.getDisplayCallback(e))||void 0===t?void 0:t.getOutputByName("message","");return o.parseDisplayRecoveryCodesText(n||"")},e.isDisplayStep=function(e){return!!this.getDisplayCallback(e)},e.getDisplayCallback=function(e){return e.getCallbacksOfType(r.CallbackType.TextOutputCallback).find((function(e){var t=e.getOutputByName("message",void 0);return t&&(t.includes("Recovery Codes")||t.includes("recovery codes"))}))},e}();t.default=a},1244:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseDisplayRecoveryCodesText=void 0,t.parseDisplayRecoveryCodesText=function(e){var t=e.match(/\s[\w\W]"([\w]*)\\/g);return Array.isArray(t)&&t.map((function(e){var t=e.match(/"([\w]*)\\/);return Array.isArray(t)?t[1]:""}))||[]}},8603:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(290)),u=a(n(9646)),s=a(n(6919)),c=a(n(4169)),l=function(){function e(){}return e.login=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){throw console.info(e,t),new Error("FRUser.login() not implemented")}))}))},e.loginWithUI=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),[4,e.getSession(t)];case 1:return n.sent(),[4,s.default.getTokens({forceRenew:!0})];case 2:return n.sent(),[4,c.default.getCurrentUser()];case 3:return[2,n.sent()];case 4:throw n.sent(),new Error("Login failed");case 5:return[2]}}))}))},e.logout=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,u.default.logout()];case 1:return t.sent(),[3,3];case 2:return t.sent(),console.warn("Session logout was not successful"),[3,3];case 3:return t.trys.push([3,5,,6]),[4,i.default.endSession(e)];case 4:return t.sent(),[3,6];case 5:return t.sent(),console.warn("OAuth endSession was not successful"),[3,6];case 6:return t.trys.push([6,8,,9]),[4,i.default.revokeToken(e)];case 7:return t.sent(),[3,9];case 8:return t.sent(),console.warn("OAuth revokeToken was not successful"),[3,9];case 9:return[4,s.default.deleteTokens()];case 10:return t.sent(),[2]}}))}))},e}();t.default=l},467:(e,t)=>{var n,r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.WebAuthnStepType=t.WebAuthnOutcomeType=t.WebAuthnOutcome=void 0,function(e){e.Error="ERROR",e.Unsupported="unsupported"}(n||(n={})),t.WebAuthnOutcome=n,function(e){e.AbortError="AbortError",e.DataError="DataError",e.ConstraintError="ConstraintError",e.EncodingError="EncodingError",e.InvalidError="InvalidError",e.NetworkError="NetworkError",e.NotAllowedError="NotAllowedError",e.NotSupportedError="NotSupportedError",e.SecurityError="SecurityError",e.TimeoutError="TimeoutError",e.UnknownError="UnknownError"}(r||(r={})),t.WebAuthnOutcomeType=r,function(e){e[e.None=0]="None",e[e.Authentication=1]="Authentication",e[e.Registration=2]="Registration"}(o||(o={})),t.WebAuthnStepType=o},204:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseRelyingPartyId=t.parsePubKeyArray=t.parseAllowCredentialsArray=t.parseNumberArray=t.parseCredentials=t.getIndexOne=t.arrayBufferToString=t.ensureArray=void 0;var r=n(467);function o(e){var t=/new Int8Array\((.+)\)/.exec(e);return null===t||t.length<2?[]:JSON.parse(t[1])}t.ensureArray=function(e){return e||[]},t.arrayBufferToString=function(e){var t=new Uint8Array(e);return(new TextDecoder).decode(t)},t.getIndexOne=function(e){return e?e[1]:""},t.parseCredentials=function(e){try{return e.split("}").filter((function(e){return!!e&&"]"!==e})).map((function(e){var t=o(e);return{id:new Int8Array(t).buffer,type:"public-key"}}))}catch(e){var t=new Error("Transforming credential object to string failed");throw t.name=r.WebAuthnOutcomeType.EncodingError,t}},t.parseNumberArray=o,t.parsePubKeyArray=function(e){return Array.isArray(e)?e:"string"==typeof e?e&&"["===e[0]?JSON.parse(e):(e=e.replace(/(\w+):/g,'"$1":'),JSON.parse("["+e+"]")):void 0},t.parseAllowCredentialsArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e)return e&&"["===e[0]?JSON.parse(e):(e=e.replace(/(\w+):/g,'"$1":'),JSON.parse("["+e+"]"))}},t.parseRelyingPartyId=function(e){return e.includes("rpId")?e.replace(/rpId: "(.+)",/,"$1"):e.replace(/id: "(.+)",/,"$1")}},9779:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebAuthnStepType=t.WebAuthnOutcome=void 0;var i=n(1853),u=n(467);Object.defineProperty(t,"WebAuthnOutcome",{enumerable:!0,get:function(){return u.WebAuthnOutcome}}),Object.defineProperty(t,"WebAuthnStepType",{enumerable:!0,get:function(){return u.WebAuthnStepType}});var s=n(204),c=n(9412),l=function(){function e(){}return e.getWebAuthnStepType=function(e){var t=this.getOutcomeCallback(e),n=this.getMetadataCallback(e),r=this.getTextOutputCallback(e);if(t&&n){var o=n.getOutputValue("data");return(null==o?void 0:o.pubKeyCredParams)?u.WebAuthnStepType.Registration:u.WebAuthnStepType.Authentication}return t&&r?r.getMessage().includes("pubKeyCredParams")?u.WebAuthnStepType.Registration:u.WebAuthnStepType.Authentication:u.WebAuthnStepType.None},e.authenticate=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,i,s,l,f,p,d;return a(this,(function(a){switch(a.label){case 0:if(t=this.getCallbacks(e),n=t.hiddenCallback,r=t.metadataCallback,o=t.textOutputCallback,!n||!r&&!o)return[3,5];i=void 0,a.label=1;case 1:return a.trys.push([1,3,,4]),s=void 0,r?(l=r.getOutputValue("data"),s=this.createAuthenticationPublicKey(l)):o&&(s=c.parseWebAuthnAuthenticateText(o.getMessage())),[4,this.getAuthenticationCredential(s)];case 2:return f=a.sent(),i=this.getAuthenticationOutcome(f),[3,4];case 3:if((p=a.sent()).name===u.WebAuthnOutcomeType.NotSupportedError)throw n.setInputValue(u.WebAuthnOutcome.Unsupported),p;throw n.setInputValue(u.WebAuthnOutcome.Error+"::"+p.name+":"+p.message),p;case 4:return n.setInputValue(i),[2,e];case 5:throw(d=new Error("Incorrect callbacks for WebAuthn authentication")).name=u.WebAuthnOutcomeType.DataError,null==n||n.setInputValue(u.WebAuthnOutcome.Error+"::"+d.name+":"+d.message),d}}))}))},e.register=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,i,s,l,f,p,d;return a(this,(function(a){switch(a.label){case 0:if(t=this.getCallbacks(e),n=t.hiddenCallback,r=t.metadataCallback,o=t.textOutputCallback,!n||!r&&!o)return[3,5];i=void 0,a.label=1;case 1:return a.trys.push([1,3,,4]),s=void 0,r?(l=r.getOutputValue("data"),s=this.createRegistrationPublicKey(l)):o&&(s=c.parseWebAuthnRegisterText(o.getMessage())),[4,this.getRegistrationCredential(s)];case 2:return f=a.sent(),i=this.getRegistrationOutcome(f),[3,4];case 3:if((p=a.sent()).name===u.WebAuthnOutcomeType.NotSupportedError)throw n.setInputValue(u.WebAuthnOutcome.Unsupported),p;throw n.setInputValue(u.WebAuthnOutcome.Error+"::"+p.name+":"+p.message),p;case 4:return n.setInputValue(i),[2,e];case 5:throw(d=new Error("Incorrect callbacks for WebAuthn registration")).name=u.WebAuthnOutcomeType.DataError,null==n||n.setInputValue(u.WebAuthnOutcome.Error+"::"+d.name+":"+d.message),d}}))}))},e.getCallbacks=function(e){var t=this.getOutcomeCallback(e),n=this.getMetadataCallback(e),r=this.getTextOutputCallback(e),o={hiddenCallback:t};return n?o.metadataCallback=n:r&&(o.textOutputCallback=r),o},e.getMetadataCallback=function(e){return e.getCallbacksOfType(i.CallbackType.MetadataCallback).find((function(e){var t=e.getOutputByName("data",void 0);return t&&t.hasOwnProperty("relyingPartyId")}))},e.getOutcomeCallback=function(e){return e.getCallbacksOfType(i.CallbackType.HiddenValueCallback).find((function(e){return"webAuthnOutcome"===e.getOutputByName("id","")}))},e.getTextOutputCallback=function(e){return e.getCallbacksOfType(i.CallbackType.TextOutputCallback).find((function(e){var t=e.getOutputByName("message",void 0);return t&&t.includes("webAuthnOutcome")}))},e.getAuthenticationCredential=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:if(!window.PublicKeyCredential)throw(t=new Error("PublicKeyCredential not supported by this browser")).name=u.WebAuthnOutcomeType.NotSupportedError,t;return[4,navigator.credentials.get({publicKey:e})];case 1:return[2,n.sent()]}}))}))},e.getAuthenticationOutcome=function(e){if(null===e)throw(c=new Error("No credential generated from authentication")).name=u.WebAuthnOutcomeType.UnknownError,c;try{var t=s.arrayBufferToString(e.response.clientDataJSON),n=e.response,r=new Int8Array(n.authenticatorData).toString(),o=new Int8Array(n.signature).toString(),a=s.arrayBufferToString(e.response.userHandle),i=t+"::"+r+"::"+o+"::"+e.id;return a&&(i=i+"::"+a),i}catch(e){var c;throw(c=new Error("Transforming credential object to string failed")).name=u.WebAuthnOutcomeType.EncodingError,c}},e.getRegistrationCredential=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:if(!window.PublicKeyCredential)throw(t=new Error("PublicKeyCredential not supported by this browser")).name=u.WebAuthnOutcomeType.NotSupportedError,t;return[4,navigator.credentials.create({publicKey:e})];case 1:return[2,n.sent()]}}))}))},e.getRegistrationOutcome=function(e){if(null===e)throw(r=new Error("No credential generated from registration")).name=u.WebAuthnOutcomeType.UnknownError,r;try{var t=s.arrayBufferToString(e.response.clientDataJSON),n=e.response;return t+"::"+new Int8Array(n.attestationObject).toString()+"::"+e.id}catch(e){var r;throw(r=new Error("Transforming credential object to string failed")).name=u.WebAuthnOutcomeType.EncodingError,r}},e.createAuthenticationPublicKey=function(e){var t=e.acceptableCredentials,n=e.allowCredentials,o=e.challenge,a=e.relyingPartyId,i=e.timeout,u=e.userVerification,c=s.parseRelyingPartyId(a),l=s.parseCredentials(n||t||"");return r(r(r({challenge:Uint8Array.from(atob(o),(function(e){return e.charCodeAt(0)})).buffer,timeout:i},l&&{allowCredentials:l}),u&&{userVerification:u}),c&&{rpId:c})},e.createRegistrationPublicKey=function(e){var t=e.pubKeyCredParams,n=s.parsePubKeyArray(t);if(!n){var o=new Error("Missing pubKeyCredParams property from registration options");throw o.name=u.WebAuthnOutcomeType.DataError,o}var a=s.parseCredentials(e.excludeCredentials),i=e.attestationPreference,c=e.authenticatorSelection,l=e.challenge,f=e.relyingPartyId,p=e.relyingPartyName,d=e.timeout,h=e.userId,y=e.userName,v=e.displayName,b=s.parseRelyingPartyId(f),g=r({name:p},b&&{id:b});return r(r({attestation:i,authenticatorSelection:JSON.parse(c),challenge:Uint8Array.from(atob(l),(function(e){return e.charCodeAt(0)})).buffer},a.length&&{excludeCredentials:a}),{pubKeyCredParams:n,rp:g,timeout:d,user:{displayName:v||y,id:Int8Array.from(h.split("").map((function(e){return e.charCodeAt(0)}))),name:y}})},e}();t.default=l},9412:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseWebAuthnRegisterText=t.parseWebAuthnAuthenticateText=void 0;var o=n(467),a=n(204);t.parseWebAuthnRegisterText=function(e){var t=new TextEncoder,n=a.getIndexOne(e.match(/attestation"{0,}:\s{0,}"(\w+)"/)),i=Number(a.getIndexOne(e.match(/timeout"{0,}:\s{0,}(\d+)/))),u=a.getIndexOne(e.match(/userVerification"{0,}:\s{0,}"(\w+)"/)),s=a.getIndexOne(e.match(/requireResidentKey"{0,}:\s{0,}(\w+)/)),c=a.getIndexOne(e.match(/authenticatorAttachment"{0,}:\s{0,}"([\w-]+)/)),l=a.getIndexOne(e.match(/rp"{0,}:\s{0,}{([^}]+)}/)).trim(),f=a.getIndexOne(l.match(/id"{0,}:\s{0,}"([^"]*)"/)),p=a.getIndexOne(l.match(/name"{0,}:\s{0,}"([^"]*)"/)),d=a.getIndexOne(e.match(/user"{0,}:\s{0,}{([^]{0,})},/)).trim(),h=a.getIndexOne(d.match(/id"{0,}:\s{0,}Uint8Array.from\("([^"]+)"/)),y=a.getIndexOne(d.match(/name"{0,}:\s{0,}"([\d\w._-]+)"/)),v=a.getIndexOne(d.match(/displayName"{0,}:\s{0,}"([\d\w\s.@_-]+)"/)),b=a.getIndexOne(e.match(/pubKeyCredParams"*:\s*\[([^]+\d\s*})\s*]/)).trim(),g=a.parsePubKeyArray(b);if(!g){var m=new Error("Missing pubKeyCredParams property from registration options");throw m.name=o.WebAuthnOutcomeType.DataError,m}var _=a.getIndexOne(e.match(/excludeCredentials"{0,}:\s{0,}\[([^]+)\s{0,}]/)).trim(),w=a.parseCredentials(_),O=a.ensureArray(e.match(/challenge"{0,}:\s{0,}new\s{0,}(Uint|Int)8Array\(([^\)]+)/)),C=JSON.parse(O[2]),T=new Int8Array(C).buffer;return r(r({attestation:n,authenticatorSelection:r(r({userVerification:u},c&&{authenticatorAttachment:c}),"true"===s&&{requireResidentKey:!!s}),challenge:T},w.length&&{excludeCredentials:w}),{pubKeyCredParams:g,rp:r({name:p},f&&{id:f}),timeout:i,user:{displayName:v,id:t.encode(h),name:y}})},t.parseWebAuthnAuthenticateText=function(e){var t,n;n=e.includes("acceptableCredentials")?a.getIndexOne(e.match(/acceptableCredentials"*\s*=\s*\[([^]+)\s*]/)).trim():a.getIndexOne(e.match(/allowCredentials"{0,}:\s{0,}\[([^]+)\s{0,}]/)).trim();var o=a.getIndexOne(e.match(/userVerification"{0,}:\s{0,}"(\w+)"/));n&&(t=(n.split("},")||[n]).map((function(e){var t=a.getIndexOne(e.match(/type"{0,}:\s{0,}"([\w-]+)"/)),n=a.ensureArray(e.match(/id"{0,}:\s{0,}new\s{0,}(Uint|Int)8Array\(([^\)]+)/)),r=JSON.parse(n[2]);return{type:t,id:new Int8Array(r).buffer}})));var i=Number(a.getIndexOne(e.match(/timeout"{0,}:\s{0,}(\d+)/))),u=a.ensureArray(e.match(/challenge"{0,}:\s{0,}new\s{0,}(Uint|Int)8Array\(([^\)]+)/)),s=JSON.parse(u[2]),c=new Int8Array(s).buffer,l=a.getIndexOne(e.match(/rpId"{0,}:\s{0,}\\{0,}"([^"\\]*)/));return r(r(r({challenge:c,timeout:i},t&&{allowCredentials:t}),o&&{userVerification:o}),l&&{rpId:l})}},8562:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeRESTJSON=t.normalizeIGJSON=t.newTokenRequired=t.isAuthzStep=t.hasAuthzAdvice=t.examineForRESTAuthz=t.examineForIGAuthz=t.buildAuthzOptions=t.addAuthzInfoToURL=t.addAuthzInfoToHeaders=void 0;var a=n(9618);function i(e){var t=new URL(e).searchParams.get("authIndexValue")||"",n=new DOMParser,r=decodeURIComponent(t),o=n.parseFromString(r,"application/xml").querySelector("Value");return o?o.innerHTML:""}t.addAuthzInfoToHeaders=function(e,t,n){var r=new Headers(e.headers);return t.AuthenticateToServiceConditionAdvice?r.set("x-tree",t.AuthenticateToServiceConditionAdvice[0]):t.TransactionConditionAdvice&&r.set("x-txid",t.TransactionConditionAdvice[0]),n&&n.idToken&&r.set("x-idtoken",n.idToken),r},t.addAuthzInfoToURL=function(e,t,n){var r=new URL(e);if(t.TransactionConditionAdvice){var o=t.TransactionConditionAdvice[0];r.searchParams.append("_txid",o)}return n&&n.idToken&&r.searchParams.append("_idtoken",n.idToken),r.toString()},t.buildAuthzOptions=function(e,t,n,r,o){var i=e.advices&&e.advices.AuthenticateToServiceConditionAdvice,u=e.advices&&e.advices.TransactionConditionAdvice,s="",c="";i?(s=i.reduce((function(e,t){return e=""+t+(e?" "+e:e)}),""),c="AuthenticateToServiceConditionAdvice"):u&&(s=u.reduce((function(e,t){return e=""+t+(e?" "+e:e)}),""),c="TransactionConditionAdvice");var l="<Advices><AttributeValuePair>"+('<Attribute name="'+c+'"/>')+("<Value>"+s+"</Value>")+"</AttributeValuePair></Advices>",f=a.getEndpointPath("authenticate",r,o),p={authIndexType:"composite_advice",authIndexValue:l};return{init:{method:"POST",credentials:"include",headers:{"Accept-API-Version":"resource=2.0, protocol=1.0"}},timeout:n,url:a.resolve(t,f+"?"+a.stringify(p))}},t.examineForIGAuthz=function(e){return(e.headers.get("Content-Type")||"").includes("html")&&e.url.includes("composite_advice")},t.examineForRESTAuthz=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,e.clone().json()];case 1:return[2,!!t.sent().advices]}}))}))},t.hasAuthzAdvice=function(e){return e.advices&&e.advices.AuthenticateToServiceConditionAdvice?Array.isArray(e.advices.AuthenticateToServiceConditionAdvice)&&e.advices.AuthenticateToServiceConditionAdvice.length>0:!(!e.advices||!e.advices.TransactionConditionAdvice)&&(Array.isArray(e.advices.TransactionConditionAdvice)&&e.advices.TransactionConditionAdvice.length>0)},t.isAuthzStep=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,e.clone().json()];case 1:return[2,!!t.sent().callbacks]}}))}))},t.newTokenRequired=function(e,t){return"function"==typeof t?t(e):401===e.status},t.normalizeIGJSON=function(e){var t={};return e.url.includes("AuthenticateToServiceConditionAdvice")?t.AuthenticateToServiceConditionAdvice=[i(e.url)]:t.TransactionConditionAdvice=[i(e.url)],{resource:"",actions:{},attributes:{},advices:t,ttl:0}},t.normalizeRESTJSON=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))}},9491:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=u(n(2275)),c=n(4985),l=u(n(4140)),f=u(n(3512)),p=n(8332),d=u(n(687)),h=u(n(6919)),y=u(n(4454)),v=n(7111),b=n(8562),g=u(n(6008)),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.request=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o,a,u,l,f,p,d,h,v,m,_,w,O;return i(this,(function(i){switch(i.label){case 0:return[4,this._request(e,!1)];case 1:return t=i.sent(),r=!1,b.newTokenRequired(t,e.requiresNewToken)?[4,this._request(e,!0)]:[3,3];case 2:t=i.sent(),i.label=3;case 3:return e.authorization&&e.authorization.handleStep?t.redirected&&b.examineForIGAuthz(t)?(r=!0,n=b.normalizeIGJSON(t),[3,7]):[3,4]:[3,18];case 4:return[4,b.examineForRESTAuthz(t)];case 5:return i.sent()?[4,b.normalizeRESTJSON(t)]:[3,7];case 6:n=i.sent(),i.label=7;case 7:return n&&n.advices?(o=s.default.get(e.authorization.config),a=o.realmPath,u=o.serverConfig,l=b.buildAuthzOptions(n,u.baseUrl,e.timeout,a,u.paths),f=new URL(l.url),p=f.searchParams.get("authIndexType"),d=f.searchParams.get("authIndexValue"),h=g.default({url:new URL(l.url),init:l.init},c.ActionTypes.StartAuthenticate,{type:p,tree:d}),v=h.url,m=h.init,l.url=v.toString(),l.init=m,[4,this._request(l,!1)]):[3,18];case 8:return _=i.sent(),[4,b.isAuthzStep(_)];case 9:if(!i.sent())throw new Error('Error: Initial response from auth server not a "step".');if(!b.hasAuthzAdvice(n))throw new Error("Error: Transactional or Service Advice is empty.");i.label=10;case 10:return i.trys.push([10,17,,18]),[4,this.stepIterator(_,e.authorization.handleStep,p,d)];case 11:i.sent(),w=void 0,i.label=12;case 12:return i.trys.push([12,14,,15]),[4,y.default.get()];case 13:return w=i.sent(),[3,15];case 14:return i.sent(),[3,15];case 15:return r?e.url=b.addAuthzInfoToURL(e.url,n.advices,w):e.init.headers=b.addAuthzInfoToHeaders(e.init,n.advices,w),[4,this._request(e,!1)];case 16:return t=i.sent(),[3,18];case 17:throw O=i.sent(),new Error(O);case 18:return[2,t]}}))}))},t.setAuthHeaders=function(e,t){return a(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,y.default.get()];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),[3,3];case 3:return n&&n.accessToken?[4,h.default.getTokens({forceRenew:t})]:[3,5];case 4:(n=r.sent())&&n.accessToken&&e.set("Authorization","Bearer "+n.accessToken),r.label=5;case 5:return[2,e]}}))}))},t.stepIterator=function(e,t,n,r){return a(this,void 0,void 0,(function(){var o,u,s=this;return i(this,(function(c){switch(c.label){case 0:return[4,e.json()];case 1:return o=c.sent(),u=new d.default(o),[2,new Promise((function(e,o){return a(s,void 0,void 0,(function(){function s(u){return a(this,void 0,void 0,(function(){var a,c;return i(this,(function(i){switch(i.label){case 0:return[4,t(u)];case 1:return a=i.sent(),[4,f.default.next(a,{type:n,tree:r})];case 2:return(c=i.sent()).type===p.StepType.LoginSuccess?e():c.type===p.StepType.LoginFailure?o("Authentication tree failure."):s(c),[2]}}))}))}return i(this,(function(e){return s(u),[2]}))}))}))]}}))}))},t._request=function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,a,u;return i(this,(function(i){switch(i.label){case 0:return n=e.url,r=e.init,o=e.timeout,a=new Headers(r.headers||{}),e.bypassAuthentication?[3,2]:[4,this.setAuthHeaders(a,t)];case 1:a=i.sent(),i.label=2;case 2:r.headers=a,i.label=3;case 3:return i.trys.push([3,5,,7]),[4,v.withTimeout(fetch(n,r),o)];case 4:return u=i.sent(),[3,7];case 5:return i.sent(),[4,v.withTimeout(fetch(n,{method:"GET"}),o)];case 6:return u=i.sent(),[3,7];case 7:return[2,u]}}))}))},t}(l.default);t.default=m},3607:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebAuthnStepType=t.WebAuthnOutcome=t.ValidatedCreateUsernameCallback=t.ValidatedCreatePasswordCallback=t.UserManager=t.TokenStorage=t.TokenManager=t.TextOutputCallback=t.TermsAndConditionsCallback=t.SuspendedTextOutputCallback=t.StepType=t.SessionManager=t.SelectIdPCallback=t.ResponseType=t.RedirectCallback=t.ReCaptchaCallback=t.PollingWaitCallback=t.PolicyKey=t.PKCE=t.PasswordCallback=t.OAuth2Client=t.NameCallback=t.MetadataCallback=t.LocalStorage=t.KbaCreateCallback=t.HttpClient=t.HiddenValueCallback=t.FRWebAuthn=t.FRUser=t.FRStep=t.FRRecoveryCodes=t.FRPolicy=t.FRLoginSuccess=t.FRLoginFailure=t.FRDevice=t.FRCallback=t.FRAuth=t.ErrorCode=t.Dispatcher=t.DeviceProfileCallback=t.Deferred=t.ConfirmationCallback=t.Config=t.ChoiceCallback=t.CallbackType=t.Auth=t.AttributeInputCallback=t.defaultMessageCreator=void 0;var u=i(n(1527));t.Auth=u.default;var s=n(1853);Object.defineProperty(t,"CallbackType",{enumerable:!0,get:function(){return s.CallbackType}}),Object.defineProperty(t,"ErrorCode",{enumerable:!0,get:function(){return s.ErrorCode}});var c=i(n(2275));t.Config=c.default;var l=i(n(4140));t.Dispatcher=l.default;var f=i(n(3512));t.FRAuth=f.default;var p=i(n(2483));t.FRCallback=p.default;var d=i(n(1538));t.AttributeInputCallback=d.default;var h=i(n(2400));t.ChoiceCallback=h.default;var y=i(n(6812));t.ConfirmationCallback=y.default;var v=i(n(5168));t.DeviceProfileCallback=v.default;var b=i(n(4148));t.HiddenValueCallback=b.default;var g=i(n(5796));t.KbaCreateCallback=g.default;var m=i(n(6301));t.MetadataCallback=m.default;var _=i(n(8128));t.NameCallback=_.default;var w=i(n(9205));t.PasswordCallback=w.default;var O=i(n(4576));t.PollingWaitCallback=O.default;var C=i(n(1996));t.ReCaptchaCallback=C.default;var T=i(n(3186));t.RedirectCallback=T.default;var P=i(n(7458));t.SelectIdPCallback=P.default;var A=i(n(1801));t.SuspendedTextOutputCallback=A.default;var k=i(n(8365));t.TermsAndConditionsCallback=k.default;var E=i(n(7921));t.TextOutputCallback=E.default;var S=i(n(5828));t.ValidatedCreatePasswordCallback=S.default;var x=i(n(4975));t.ValidatedCreateUsernameCallback=x.default;var I=n(8332);Object.defineProperty(t,"StepType",{enumerable:!0,get:function(){return I.StepType}});var M=i(n(7807));t.FRLoginFailure=M.default;var N=i(n(9203));t.FRLoginSuccess=N.default;var j=i(n(687));t.FRStep=j.default;var R=i(n(50));t.FRDevice=R.default;var U=a(n(2046));t.FRPolicy=U.default,Object.defineProperty(t,"PolicyKey",{enumerable:!0,get:function(){return U.PolicyKey}});var D=i(n(9824));t.defaultMessageCreator=D.default;var V=i(n(24));t.FRRecoveryCodes=V.default;var B=i(n(8603));t.FRUser=B.default;var L=a(n(9779));t.FRWebAuthn=L.default,Object.defineProperty(t,"WebAuthnOutcome",{enumerable:!0,get:function(){return L.WebAuthnOutcome}}),Object.defineProperty(t,"WebAuthnStepType",{enumerable:!0,get:function(){return L.WebAuthnStepType}});var K=i(n(9491));t.HttpClient=K.default;var F=a(n(290));t.OAuth2Client=F.default,Object.defineProperty(t,"ResponseType",{enumerable:!0,get:function(){return F.ResponseType}});var W=i(n(9646));t.SessionManager=W.default;var q=i(n(6919));t.TokenManager=q.default;var z=i(n(4454));t.TokenStorage=z.default;var H=i(n(4169));t.UserManager=H.default;var J=i(n(4910));t.Deferred=J.default;var G=i(n(4554));t.PKCE=G.default;var Q=i(n(9129));t.LocalStorage=Q.default},7217:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseType=void 0,function(e){e.Code="code",e.Token="token"}(n||(n={})),t.ResponseType=n},290:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseType=t.allowedErrors=void 0;var u=n(4985),s=i(n(2275)),c=i(n(4454)),l=n(7487),f=i(n(4554)),p=n(7111),d=n(9618),h=n(7217);Object.defineProperty(t,"ResponseType",{enumerable:!0,get:function(){return h.ResponseType}});var y=i(n(6008)),v={AuthenticationConsentRequired:"Authentication or consent required",AuthorizationTimeout:"Authorization timed out",FailedToFetch:"Failed to fetch",NetworkError:"NetworkError when attempting to fetch resource.",CORSError:"Cross-origin redirection"};t.allowedErrors=v;var b=function(){function e(){}return e.createAuthorizeUrl=function(e){return o(this,void 0,void 0,(function(){var t,n,o,i,c,l;return a(this,(function(a){switch(a.label){case 0:return t=s.default.get(e),n=t.clientId,o=t.redirectUri,i=t.scope,c=r(r({},e.query),{client_id:n,redirect_uri:o,response_type:e.responseType,scope:i,state:e.state}),e.verifier?[4,f.default.createChallenge(e.verifier)]:[3,2];case 1:l=a.sent(),c.code_challenge=l,c.code_challenge_method="S256",a.label=2;case 2:return[2,y.default({url:new URL(this.getUrl("authorize",c,e)),init:{}},u.ActionTypes.Authorize).url.toString()]}}))}))},e.getAuthCodeByIframe=function(e){return o(this,void 0,void 0,(function(){var t,n,r=this;return a(this,(function(o){switch(o.label){case 0:return[4,this.createAuthorizeUrl(e)];case 1:return t=o.sent(),n=s.default.get(e).serverConfig,[2,new Promise((function(e,o){var a,i=document.createElement("iframe"),u=function(){},s=u,c=0;a=function(){window.clearTimeout(c),i.removeEventListener("load",s),i.remove()},s=function(){if(i.contentWindow){var t=i.contentWindow.location.href;(r.containsAuthCode(t)||r.containsAuthError(t))&&(a(),e(t))}},c=window.setTimeout((function(){a(),o(new Error(v.AuthorizationTimeout))}),n.timeout),i.style.display="none",i.addEventListener("load",s),document.body.appendChild(i),i.src=t}))]}}))}))},e.getOAuth2Tokens=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,i,u,c,l,f,p;return a(this,(function(a){switch(a.label){case 0:return t=s.default.get(e),n=t.clientId,r=t.redirectUri,o={client_id:n,code:e.authorizationCode,grant_type:"authorization_code",redirect_uri:r},e.verifier&&(o.code_verifier=e.verifier),i=d.stringify(o),u={body:i,headers:{"content-length":i.length.toString(),"content-type":"application/x-www-form-urlencoded"},method:"POST"},[4,this.request("accessToken",void 0,!1,u,e)];case 1:return c=a.sent(),[4,this.getBody(c)];case 2:if(l=a.sent(),200!==c.status)throw f="string"==typeof l?"Expected 200, received "+c.status:this.parseError(l),new Error(f);if(!(p=l).access_token)throw new Error("Access token not found in response");return[2,{accessToken:p.access_token,idToken:p.id_token,refreshToken:p.refresh_token}]}}))}))},e.getUserInfo=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,this.request("userInfo",void 0,!0,void 0,e)];case 1:if(200!==(t=n.sent()).status)throw new Error("Failed to get user info; received "+t.status);return[4,t.json()];case 2:return[2,n.sent()]}}))}))},e.endSession=function(e){return o(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return[4,c.default.get()];case 1:return t=o.sent().idToken,n={},t&&(n.id_token_hint=t),[4,this.request("endSession",n,!0,void 0,e)];case 2:if(r=o.sent(),!l.isOkOr4xx(r))throw new Error("Failed to end session; received "+r.status);return[2,r]}}))}))},e.revokeToken=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(a){switch(a.label){case 0:return t=s.default.get(e).clientId,[4,c.default.get()];case 1:return n=a.sent().accessToken,r={body:d.stringify({client_id:t,token:n}),credentials:"include",headers:{"content-type":"application/x-www-form-urlencoded"},method:"POST"},[4,this.request("revoke",void 0,!1,r,e)];case 2:if(o=a.sent(),!l.isOkOr4xx(o))throw new Error("Failed to revoke token; received "+o.status);return[2,o]}}))}))},e.request=function(e,t,n,r,i){return o(this,void 0,void 0,(function(){var o,l,f,d,h;return a(this,(function(a){switch(a.label){case 0:return o=s.default.get(i).serverConfig,l=this.getUrl(e,t,i),f=function(e){switch(e){case"accessToken":return u.ActionTypes.ExchangeToken;case"endSession":return u.ActionTypes.Logout;case"revoke":return u.ActionTypes.RevokeToken;default:return u.ActionTypes.UserInfo}},r=r||{},n?[4,c.default.get()]:[3,2];case 1:d=a.sent().accessToken,r.credentials="include",r.headers=r.headers||new Headers,r.headers.set("authorization","Bearer "+d),a.label=2;case 2:return h=y.default({url:new URL(l),init:r},f(e)),[4,p.withTimeout(fetch(h.url.toString(),h.init),o.timeout)];case 3:return[2,a.sent()]}}))}))},e.containsAuthCode=function(e){return!!e&&/code=([^&]+)/.test(e)},e.containsAuthError=function(e){return!!e&&/error=([^&]+)/.test(e)},e.getBody=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return(t=e.headers.get("content-type"))&&t.indexOf("application/json")>-1?[4,e.json()]:[3,2];case 1:return[2,n.sent()];case 2:return[4,e.text()];case 3:return[2,n.sent()]}}))}))},e.parseError=function(e){if(e){if(e.error&&e.error_description)return e.error+": "+e.error_description;if(e.code&&e.message)return e.code+": "+e.message}},e.getUrl=function(e,t,n){var r=s.default.get(n),o=r.realmPath,a=r.serverConfig,i=d.getEndpointPath(e,o,a.paths),u=d.resolve(a.baseUrl,i);return t&&(u+="?"+d.stringify(t)),u},e}();t.default=b},9646:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(2275)),u=n(5628),s=n(7487),c=n(7111),l=n(4985),f=a(n(6008)),p=n(9618),d=function(){function e(){}return e.logout=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,d,h,y,v;return o(this,(function(o){switch(o.label){case 0:return t=i.default.get(e),n=t.realmPath,r=t.serverConfig,a={credentials:"include",headers:{"accept-api-version":"protocol=1.0,resource=2.0","x-requested-with":u.REQUESTED_WITH},method:"POST"},d=p.getEndpointPath("sessions",n,r.paths)+"?_action=logout",h=p.resolve(r.baseUrl,d),y=f.default({url:new URL(h),init:a},l.ActionTypes.Logout),[4,c.withTimeout(fetch(y.url.toString(),y.init),r.timeout)];case 1:if(v=o.sent(),!s.isOkOr4xx(v))throw new Error("Failed to log out; received "+v.status);return[2,v]}}))}))},e}();t.default=d},5628:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.REQUESTED_WITH=void 0;t.REQUESTED_WITH="forgerock-sdk"},6919:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=c(n(2275)),f=i(n(290)),p=c(n(4454)),d=c(n(4554)),h=n(7111),y=n(9618),v=function(){function e(){}return e.getTokens=function(t){var n,o,a;return u(this,void 0,void 0,(function(){var i,u,c,v,b,g,m,_,w,O,C,T,P,A,k,E,S,x;return s(this,(function(s){switch(s.label){case 0:i=null,u=l.default.get(t),c=u.clientId,v=u.serverConfig,b=u.support,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,p.default.get()];case 2:return i=s.sent(),[3,4];case 3:return g=s.sent(),console.info("No stored tokens available",g),[3,4];case 4:if(i&&!(null==t?void 0:t.forceRenew)&&!(null===(n=null==t?void 0:t.query)||void 0===n?void 0:n.code))return[2,i];if(!i)return[3,9];s.label=5;case 5:return s.trys.push([5,8,,9]),[4,f.default.revokeToken(t)];case 6:return s.sent(),[4,e.deleteTokens()];case 7:return s.sent(),[3,9];case 8:return m=s.sent(),console.warn("Existing tokens could not be revoked or deleted",m),[3,9];case 9:return(null===(o=null==t?void 0:t.query)||void 0===o?void 0:o.code)&&(null===(a=null==t?void 0:t.query)||void 0===a?void 0:a.state)?(_=window.sessionStorage.getItem(c),window.sessionStorage.removeItem(c),w=JSON.parse(_),[4,this.tokenExchange(t,w)]):[3,11];case 10:return[2,s.sent()];case 11:return O=d.default.createVerifier(),C=d.default.createState(),T=r(r({},t),{responseType:f.ResponseType.Code,state:C,verifier:O}),[4,f.default.createAuthorizeUrl(T)];case 12:P=s.sent(),s.label=13;case 13:return s.trys.push([13,18,,19]),A=void 0,"legacy"!==b&&void 0!==b?[3,15]:(k=URL.bind,[4,f.default.getAuthCodeByIframe(T)]);case 14:return A=new(k.apply(URL,[void 0,s.sent()])),[3,17];case 15:return[4,h.withTimeout(fetch(P,{credentials:"include",mode:"cors"}),v.timeout)];case 16:E=s.sent(),A=new URL(E.url),s.label=17;case 17:if(A.searchParams.get("error"))throw Error(""+A.searchParams.get("error_description"));if(!A.searchParams.get("code"))throw Error(f.allowedErrors.AuthenticationConsentRequired);return S=y.parseQuery(A.toString()),t||(t={}),t.query=S,[3,19];case 18:if(x=s.sent(),"redirect"!==(null==t?void 0:t.login))throw x;if(f.allowedErrors.AuthenticationConsentRequired!==x.message&&f.allowedErrors.AuthorizationTimeout!==x.message&&f.allowedErrors.FailedToFetch!==x.message&&f.allowedErrors.NetworkError!==x.message&&!x.message.includes(f.allowedErrors.CORSError))throw x;return window.sessionStorage.setItem(c,JSON.stringify(T)),[2,window.location.assign(P)];case 19:return[4,this.tokenExchange(t,{state:C,verifier:O})];case 20:return[2,s.sent()]}}))}))},e.deleteTokens=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,p.default.remove()];case 1:return e.sent(),[2]}}))}))},e.tokenExchange=function(e,t){var n,o,a,i;return u(this,void 0,void 0,(function(){var u,c,l,d,h;return s(this,(function(s){switch(s.label){case 0:if((null===(n=e.query)||void 0===n?void 0:n.state)!==t.state)throw new Error("State mismatch");if(!(null===(o=e.query)||void 0===o?void 0:o.code)||Array.isArray(null===(a=e.query)||void 0===a?void 0:a.code))throw new Error("Failed to acquire authorization code");return u=null===(i=e.query)||void 0===i?void 0:i.code,c=t.verifier,l=r(r({},e),{authorizationCode:u,verifier:c}),[4,f.default.getOAuth2Tokens(l)];case 1:if(!(d=s.sent())||!d.accessToken)throw new Error("Unable to exchange authorization for tokens");s.label=2;case 2:return s.trys.push([2,4,,5]),[4,p.default.set(d)];case 3:return s.sent(),[3,5];case 4:return h=s.sent(),console.error("Failed to store tokens",h),[3,5];case 5:return[2,d]}}))}))},e}();t.default=v},7909:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TOKEN_KEY=t.DB_NAME=void 0;t.DB_NAME="forgerock-sdk";t.TOKEN_KEY="tokens"},4454:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(2275)),u=a(n(6309)),s=a(n(5694)),c=a(n(6721)),l=function(){function e(){}return e.get=function(){return r(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(r){switch(r.label){case 0:return e=this.getClientConfig(),t=e.clientId,"sessionStorage"!==(n=e.tokenStore)?[3,2]:[4,c.default.get(t)];case 1:return[2,r.sent()];case 2:return"localStorage"!==n?[3,4]:[4,s.default.get(t)];case 3:return[2,r.sent()];case 4:return"indexedDB"!==n?[3,6]:[4,u.default.get(t)];case 5:return[2,r.sent()];case 6:return n&&n.get?[4,n.get(t)]:[3,8];case 7:return[2,r.sent()];case 8:return[4,s.default.get(t)];case 9:return[2,r.sent()]}}))}))},e.set=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:return t=this.getClientConfig(),n=t.clientId,"sessionStorage"!==(r=t.tokenStore)?[3,2]:[4,c.default.set(n,e)];case 1:return[2,o.sent()];case 2:return"localStorage"!==r?[3,4]:[4,s.default.set(n,e)];case 3:return[2,o.sent()];case 4:return"indexedDB"!==r?[3,6]:[4,u.default.set(n,e)];case 5:return[2,o.sent()];case 6:return r&&r.set?[4,r.set(n,e)]:[3,8];case 7:return[2,o.sent()];case 8:return[4,s.default.set(n,e)];case 9:return[2,o.sent()]}}))}))},e.remove=function(){return r(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(r){switch(r.label){case 0:return e=this.getClientConfig(),t=e.clientId,"sessionStorage"!==(n=e.tokenStore)?[3,2]:[4,c.default.remove(t)];case 1:return[2,r.sent()];case 2:return"localStorage"!==n?[3,4]:[4,s.default.remove(t)];case 3:return[2,r.sent()];case 4:return"indexedDB"!==n?[3,6]:[4,u.default.remove(t)];case 5:return[2,r.sent()];case 6:return n&&n.remove?[4,n.remove(t)]:[3,8];case 7:return[2,r.sent()];case 8:return[4,s.default.remove(t)];case 9:return[2,r.sent()]}}))}))},e.getClientConfig=function(){var e=i.default.get(),t=e.clientId,n=e.tokenStore;if(!t)throw new Error("clientId is required to manage token storage");return{clientId:t,tokenStore:n}},e}();t.default=l},6309:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(7909),i=function(){function e(){}return e.get=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t,n){var r=function(){return n()},o=window.indexedDB.open(a.DB_NAME);o.onsuccess=function(){if(!o.result.objectStoreNames.contains(e))return o.result.close(),n("Client ID not found");var i=o.result.transaction(e,"readonly").objectStore(e).get(a.TOKEN_KEY);i.onsuccess=function(e){if(!e||!e.target)throw new Error("Missing storage event target");o.result.close(),t(e.target.result)},i.onerror=r},o.onupgradeneeded=function(){o.result.close(),n("IndexedDB upgrade needed")},o.onerror=r}))]}))}))},e.set=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){return[2,new Promise((function(n,r){var o=window.indexedDB.open(a.DB_NAME),i=function(){o.result.close(),n()},u=function(){return r()},s=function(){o.result.createObjectStore(e)},c=function(){if(!o.result.objectStoreNames.contains(e)){var n=o.result.version+1;return o.result.close(),(o=window.indexedDB.open(a.DB_NAME,n)).onupgradeneeded=s,o.onsuccess=c,void(o.onerror=u)}var r=o.result.transaction(e,"readwrite");r.onerror=u;var l=r.objectStore(e).put(t,a.TOKEN_KEY);l.onsuccess=i,l.onerror=u};o.onupgradeneeded=s,o.onsuccess=c,o.onerror=u}))]}))}))},e.remove=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t,n){var r=function(){return n()},o=window.indexedDB.open(a.DB_NAME);o.onsuccess=function(){if(!o.result.objectStoreNames.contains(e))return t();var n=o.result.transaction(e,"readwrite").objectStore(e).delete(a.TOKEN_KEY);n.onsuccess=function(){t()},n.onerror=r},o.onerror=r}))]}))}))},e}();t.default=i},5694:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(7909),i=function(){function e(){}return e.get=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){t=localStorage.getItem(a.DB_NAME+"-"+e);try{return[2,Promise.resolve(JSON.parse(t||""))]}catch(e){return console.warn("Could not parse token from localStorage. This could be due to accessing a removed token"),[2,void 0]}return[2]}))}))},e.set=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){return n=JSON.stringify(t),localStorage.setItem(a.DB_NAME+"-"+e,n),[2]}))}))},e.remove=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return localStorage.removeItem(a.DB_NAME+"-"+e),[2]}))}))},e}();t.default=i},6721:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(7909),i=function(){function e(){}return e.get=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){t=sessionStorage.getItem(a.DB_NAME+"-"+e);try{return[2,Promise.resolve(JSON.parse(t||""))]}catch(e){return console.warn("Could not parse token from sessionStorage. This could be due to accessing a removed token"),[2,void 0]}return[2]}))}))},e.set=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){return n=JSON.stringify(t),sessionStorage.setItem(a.DB_NAME+"-"+e,n),[2]}))}))},e.remove=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return sessionStorage.removeItem(a.DB_NAME+"-"+e),[2]}))}))},e}();t.default=i},4169:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(290)),a=function(){function e(){}return e.getCurrentUser=function(){return o.default.getUserInfo()},e}();t.default=a},4910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this;this.promise=new Promise((function(t,n){e.reject=n,e.resolve=t}))};t.default=n},7487:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isOkOr4xx=void 0,t.isOkOr4xx=function(e){return e.ok||4===Math.floor(e.status/100)}},6008:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2275));t.default=function(e,t,n){var r=o.default.get().middleware;if(!Array.isArray(r))return e;var a=Object.freeze({type:t,payload:n}),i=r.map((function(e){return e}));return function t(){var n=i.shift();return n&&n(e,a,t),e}()}},4554:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.createState=function(){return this.createRandomString(16)},e.createVerifier=function(){return this.createRandomString(32)},e.createChallenge=function(e){return n(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return[4,this.sha256(e)];case 1:return t=n.sent(),[2,this.base64UrlEncode(t)]}}))}))},e.base64UrlEncode=function(e){var t=Array.prototype.slice.call(e);return window.btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},e.sha256=function(e){return n(this,void 0,void 0,(function(){var t,n;return r(this,(function(r){switch(r.label){case 0:return t=(new TextEncoder).encode(e),[4,window.crypto.subtle.digest("SHA-256",t)];case 1:return n=r.sent(),[2,new Uint8Array(n)]}}))}))},e.createRandomString=function(e){void 0===e&&(e=32);var t=new Uint8Array(e);return window.crypto.getRandomValues(t),btoa(t.join("")).replace(/[^a-zA-Z0-9]+/,"")},e}();t.default=o},7304:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRealmUrlPath=void 0,t.getRealmUrlPath=function(e){var t=(e||"").split("/").map((function(e){return e.trim()})).filter((function(e){return""!==e}));return"root"!==t[0]&&t.unshift("root"),t.map((function(e){return"realms/"+e})).join("/")}},9129:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){void 0===e&&(e=!1),this.storage=e?window.localStorage:window.sessionStorage}return e.prototype.get=function(e){var t=this.storage.getItem(e);if(t)return JSON.parse(t)},e.prototype.set=function(e,t){this.storage.setItem(e,JSON.stringify(t))},e.prototype.remove=function(e){this.storage.removeItem(e)},e}();t.default=n},9038:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.plural=void 0,t.plural=function(e,t,n){return 1===e?t:void 0!==n?n:t+"s"}},7111:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.withTimeout=void 0;var r=n(2275);t.withTimeout=function(e,t){void 0===t&&(t=r.DEFAULT_TIMEOUT);var n=t||r.DEFAULT_TIMEOUT;return Promise.race([e,new Promise((function(e,t){return window.setTimeout((function(){return t(new Error("Timeout"))}),n)}))])}},9618:function(e,t,n){var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=t.resolve=t.parseQuery=t.getEndpointPath=t.getBaseUrl=void 0;var o=n(7304);function a(e){var t="http:"===e.protocol&&-1===["","80"].indexOf(e.port)||"https:"===e.protocol&&-1===["","443"].indexOf(e.port)?":"+e.port:"";return e.protocol+"//"+e.hostname+t}t.getBaseUrl=a,t.getEndpointPath=function(e,t,n){var r=o.getRealmUrlPath(t),a={authenticate:"json/"+r+"/authenticate",authorize:"oauth2/"+r+"/authorize",accessToken:"oauth2/"+r+"/access_token",endSession:"oauth2/"+r+"/connect/endSession",userInfo:"oauth2/"+r+"/userinfo",revoke:"oauth2/"+r+"/token/revoke",sessions:"json/"+r+"/sessions/"};return n&&n[e]?n[e]:a[e]},t.resolve=function(e,t){var n=new URL(e);if(t.startsWith("/"))return""+a(n)+t;var o=n.pathname.split("/"),i=t.split("/").filter((function(e){return!!e})),u=r(r([],o.slice(0,-1)),i).join("/");return""+a(n)+u},t.parseQuery=function(e){var t=new URL(e),n={};return t.searchParams.forEach((function(e,t){return n[t]=e})),n},t.stringify=function(e){var t=[];for(var n in e)e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}}},t={};return function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}(3607)})()}));
//# sourceMappingURL=index.js.map
